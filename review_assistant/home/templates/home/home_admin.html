{% extends "review_assistant/base_generic.html" %}
{% block content %}
 Home tab's
{% if  user.is_staff %}
    <form id="send-push__form">
        <h3 class="header">Send a push notification</h3>
        <p class="error"></p>
        <input type="text" name="head" placeholder="Header: Your favorite airline üòç">
        <textarea name="body" id="" cols="30" rows="10" placeholder="Body: Your flight has been cancelled üò±üò±üò±"></textarea>
        <button>Send Me</button>
    </form>
    <div class="bd-example">
        <nav>
          <div class="nav nav-tabs mb-3" id="nav-tab" role="tablist">
            <button class="nav-link" id="nav-yesterday-tab" data-bs-toggle="tab" data-bs-target="#nav-yesterday" type="button" role="tab" aria-controls="nav-yesterday" aria-selected="true">–í—á–µ—Ä–∞</button>
            <button class="nav-link active" id="nav-today-tab" data-bs-toggle="tab" data-bs-target="#nav-today" type="button" role="tab" aria-controls="nav-today" aria-selected="false" tabindex="-1">–°–µ–≥–æ–¥–Ω—è</button>
            <button class="nav-link" id="nav-tomorrow-tab" data-bs-toggle="tab" data-bs-target="#nav-tomorrow" type="button" role="tab" aria-controls="nav-tomorrow" aria-selected="false" tabindex="-1">–ó–∞–≤—Ç—Ä–∞</button>
          </div>
        </nav>
        <div class="tab-content" id="nav-tabContent">
            <div class="tab-pane fade " id="nav-yesterday" role="tabpanel" aria-labelledby="nav-home-tab">
                {% if yesterday %}
                      {% for task in yesterday %}
                          <div class="m-1">
                              {% include "tasks/task_layout.html" %}
                          </div>
                      {% endfor %}
                  {% endif %}
            </div>
            <div class="tab-pane fade active show" id="nav-today" role="tabpanel" aria-labelledby="nav-profile-tab">
              <div class="row row-cols-auto">
                  {% if today %}
                      {% for task in today %}
                          <div class="m-1">
                              {% include "tasks/task_layout.html" %}
                          </div>
                      {% endfor %}
                  {% endif %}
              </div>
            </div>
            <div class="tab-pane fade" id="nav-tomorrow" role="tabpanel" aria-labelledby="nav-contact-tab">
                {% if tomorrow %}
                    {% for task in tomorrow %}
                        <div class="m-1">
                            {% include "tasks/task_layout.html" %}
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
<script>
    document.addEventListener('swiped-up', function(e) {
        console.log('swiped-up'); // the element that was swiped
    });
    document.addEventListener('swiped-down', function(e) {
        console.log('swiped-down'); // the element that was swiped
    });
</script>
<script>
    function getUpdate(){
    $.ajax({
        url: '/',         /* –ö—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å */
        method: 'get',             /* –ú–µ—Ç–æ–¥ –∑–∞–ø—Ä–æ—Å–∞ (post –∏–ª–∏ get) */
        dataType: 'html',          /* –¢–∏–ø –¥–∞–Ω–Ω—ã—Ö –≤ –æ—Ç–≤–µ—Ç–µ (xml, json, script, html). */
        data: {text: ''},     /* –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ –≤ –º–∞—Å—Å–∏–≤–µ */
        success: function(data){   /* —Ñ—É–Ω–∫—Ü–∏—è –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.  */

             $('#nav-yesterday').html($(data).find('#nav-yesterday').html());
             $('#nav-today').html($(data).find('#nav-today').html());
             $('#nav-tomorrow').html($(data).find('#nav-tomorrow').html());

             console.log($(data).find('#update'));
             console.log($('#update').length);
              /* –í –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π data —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –æ—Ç–≤–µ—Ç –æ—Ç index.php. */
        }
    });}
    window.setInterval('getUpdate()', 5000);
</script>
<script>
    function notifyMe () {
        var notification = new Notification ("Header header", {
            body: "body body",
            icon: "http://127.0.0.1:8000/static/icons/minion.jpg"
        });
    };
    function notifSet () {
        if (!("Notification" in window)){
            alert("–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è");
            }
        else if (Notification.permission === "granted"){
            setTimeout(notifyMe, 2000);
            }
        else if (Notification.permission !== "denied") {
            Notification.requestPermission (function (permission){
                if (!('permission' in Notification))
                    Notification.permission = permission;
                if (permission == "granted")
                    alert("2000");
                    setTimeout(notifyMe, 2000);
            });
        }
    }
</script>
{% endif %}
{% endblock %}